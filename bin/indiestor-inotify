#!/bin/sh
#------------------------------------------------------------
# Indiestor program
# Concept, requirements, specifications, and unit testing
# By Alex Gardiner, alex@indiestor.com
# Written by Erik Poupaert, erik@sankuru.biz
# Commissioned at peopleperhour.com 
# Licensed under the GPL
#------------------------------------------------------------
PATH=/bin:/sbin:/usr/bin:/usr/sbin
export PATH
pidFile="/var/run/indiestor/process.pid"
if [ ! -f $pidFile ]; then 
	logger "indiestor-inotify: no pid file; starting indiestor-inotify"
	echo $$ > $pidFile
	super indiestor-inotify
else
	if [  "$(pgrep -f indiestor-inotify.php)" = "" ] ; then
		logger "indiestor-inotify: indiestor-inotify.php not running; starting"
		super indiestor-inotify
#	else
#		logger "indiestor-inotify: indiestor-inotify.php running; skipping"
	fi
fi

